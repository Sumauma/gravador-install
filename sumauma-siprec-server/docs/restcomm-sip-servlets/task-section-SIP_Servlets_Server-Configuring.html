<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Sip Connectors</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body id="_bsssc_binary_sip_servlets_server_configuring" class="article">
<div id="header">
<h1>Sip Connectors</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_bsssc_binary_sip_servlets_server_adding_sip_connectors">Configuring SIP Connectors and Bindings</a></li>
<li><a href="#_bsssc_binary_sip_servlets_server_configuring_application_routing">Application Routing and Service Configuration</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Restcomm SIP Servlets comes with default settings that are designed to get your system up and running without the need to know about all the detailed configurations.
That said, there are situations in which you might like to fine-tune your setttings to adapt it to your needs.
That is what the following section will help you achieve.
You will get a better understand of SIP connectors and how to make them work for you.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bsssc_binary_sip_servlets_server_adding_sip_connectors"><a class="anchor" href="#_bsssc_binary_sip_servlets_server_adding_sip_connectors"></a>Configuring SIP Connectors and Bindings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two important configuration files that you might need to modifying depending on your system needs.
The standalone-sip.xml file in Restcomm SIP Servlets for JBoss AS7 and the server.xml file in Restcomm SIP Servlets for Tomcat.
The extracts below will give you a snapshot of default configurations.</p>
</div>
<div class="paragraph">
<div class="title">For JBoss</div>
<p>Changing the ports and other configuration for the SIP connector can be done in the standalone-sip.xml file.
Below is an extract :</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Adding a SIP Connector to $JBOSS_HOME/standalone/configuration/standalone-sip.xml</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"> &lt;socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}"&gt;
        &lt;socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/&gt;
        &lt;socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/&gt;
        &lt;socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/&gt;
        &lt;socket-binding name="ajp" port="8009"/&gt;
        &lt;socket-binding name="http" port="8080"/&gt;
        &lt;socket-binding name="https" port="8443"/&gt;
        &lt;socket-binding name="sip-udp" port="5080"/&gt;
        &lt;socket-binding name="sip-tcp" port="5080"/&gt;
        &lt;socket-binding name="sip-tls" port="5081"/&gt;
	&lt;socket-binding name="sip-ws" port="5082"/&gt;
        &lt;socket-binding name="osgi-http" interface="management" port="8090"/&gt;
        &lt;socket-binding name="remoting" port="4447"/&gt;
        &lt;socket-binding name="txn-recovery-environment" port="4712"/&gt;
        &lt;socket-binding name="txn-status-manager" port="4713"/&gt;
        &lt;outbound-socket-binding name="mail-smtp"&gt;
            &lt;remote-destination host="localhost" port="25"/&gt;
        &lt;/outbound-socket-binding&gt;
    &lt;/socket-binding-group&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you need to add a connector for the same protocol, a new socket-binding should be created.
A naming convention should be followed for the name attribute of the new socket-binding.
The convention is &lt;name&gt;-sip-&lt;protocol&gt;. By example,</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">	&lt;socket-binding name="second-sip-udp" port="5080"/&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="dlist">
<div class="title">SIP &lt;connector&gt; Attributes</div>
<dl>
<dt class="hdlist1">port (defined at the socket-binding element)</dt>
<dd>
<p>The port number on which the container will be able to receive SIP messages.</p>
</dd>
<dt class="hdlist1">protocol</dt>
<dd>
<p>Specifies the connector is a SIP Connector and not an HTTP Connector.
There is no need to change this property.</p>
</dd>
<dt class="hdlist1">signalingTransport (use socket-binding element)</dt>
<dd>
<p>Specifies the transport on which the container will be able to receive SIP messages.
Supported Values are "udp", "tcp", "tls" and "ws".</p>
</dd>
<dt class="hdlist1">use-load-balancer</dt>
<dd>
<p>Enable to specify if that particular connector will be using the Load Balancer for outbound traffic. The Load Balancer to be used is defined by the next <code>load-balancer</code> attributes below</p>
</dd>
<dt class="hdlist1">load-balancer-address </dt>
<dd>
<p>Specifies the Load Balancer address used to route outbound traffic for this SIP Connector.</p>
</dd>
<dt class="hdlist1">load-balancer-rmi-port</dt>
<dd>
<p>Specifies the RMI Port used to connect to the Load Balancer for this SIP Connector. This enables the connector to advertise to the Load Balancer the IP and Port it is listening on so that the Load Balancer can route traffic to that connector as well.</p>
</dd>
<dt class="hdlist1">load-balancer-sip-port</dt>
<dd>
<p>Specifies the SIP Port of the Load Balancer to use for outbound traffic for this SIP Connector. This enables the connector to choose to which Load Balancer it sends outbound traffic. This is particularly useful for supporting different Load Balancers over different network interfaces</p>
</dd>
<dt class="hdlist1">use-stun</dt>
<dd>
<p>Enables Session Traversal Utilities for NAT (STUN) support for this Connector.
The attribute defaults to "false". If set to "true", ensure that the <code>ipAddress</code> attribute is <em>not</em> set to <code>127.0.0.1</code>.
Refer to Restcomm SIP Servlets <a href="#_mssstun__stun">[_mssstun__stun]</a> for more information about STUN.</p>
</dd>
<dt class="hdlist1">stun-server-address </dt>
<dd>
<p>Specifies the STUN server address used to discover the public IP address of the SIP Connector.
This attribute is only required if the <code>useStun</code> attribute is set to "true". Refer to Restcomm SIP Servlets <a href="#_mssstun__stun">[_mssstun__stun]</a> for more information about STUN and public STUN servers.</p>
</dd>
<dt class="hdlist1">stun-server-port</dt>
<dd>
<p>Specifies the STUN server port of the STUN server used in the <code>stunServerAddress</code> attribute.
You should rarely need to change this attribute; also, it is only needed if the <code>useStun</code> attribute is set to "true". Refer to Restcomm SIP Servlets <a href="#_mssstun__stun">[_mssstun__stun]</a> for more information about STUN.</p>
</dd>
<dt class="hdlist1">use-static-address</dt>
<dd>
<p>Specifies whether the settings in staticServerAddress and staticServerPort are activated.
The default value is "false" (deactivated).</p>
</dd>
<dt class="hdlist1">static-server-address</dt>
<dd>
<p>Specifies what load-balancer server address is inserted in Contact/Via headers for server-created requests.
This parameter  is useful for  cluster configurations where  requests should  be bound to a load-balancer address, rather than  a specific node address.</p>
</dd>
<dt class="hdlist1">static-server-port</dt>
<dd>
<p>Specifies the port of the load-balancer specified in staticServerAddress.
This parameter is useful in cluster configurations where requests should be bound to a load-balancer address rather than a specific node address.</p>
</dd>
<dt class="hdlist1">http-follow-sip</dt>
<dd>
<p>Makes the application server aware of how the SIP Load Balancers assign request affinity, and stores this information in the application session.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">For Tomcat</div>
<p>Changing the ports and other configuration for the SIP connector can be done in the server.xml file.
Below is an extract.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Adding a SIP Connector to $CATALINA_HOME/conf/server.xml</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">  &lt;Connector port="5080"
ipAddress="127.0.0.1"
 protocol="org.mobicents.servlet.sip.startup.SipProtocolHandler"
 signalingTransport="udp"
 useStun="false"
 stunServerAddress="stun01.sipphone.com"
 stunServerPort="3478"
 staticServerAddress="122.122.122.122"
 staticServerPort="44"
 useStaticAddress="true"
 httpFollowsSip="false"/&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="dlist">
<div class="title">SIP &lt;connector&gt; Attributes</div>
<dl>
<dt class="hdlist1">port</dt>
<dd>
<p>The port number on which the container will be able to receive SIP messages.</p>
</dd>
<dt class="hdlist1">ipAddress</dt>
<dd>
<p>The IP address at which the container will be able to receive SIP messages.
The container can be configured to listen to all available IP addresses by setting <code class="parameter">ipAddress</code> to <code>0.0.0.0 &lt;sipPathName&gt;</code>.</p>
</dd>
<dt class="hdlist1">protocol</dt>
<dd>
<p>Specifies the connector is a SIP Connector and not an HTTP Connector.
There is no need to change this property.</p>
</dd>
<dt class="hdlist1">signalingTransport</dt>
<dd>
<p>Specifies the transport on which the container will be able to receive SIP messages.
For example, "udp".</p>
</dd>
<dt class="hdlist1">useLoadBalancer</dt>
<dd>
<p>Enable to specify if that particular connector will be using the Load Balancer for outbound traffic. The Load Balancer to be used is defined by the next <code>loadBalancer</code> attributes below</p>
</dd>
<dt class="hdlist1">loadBalancerAddress </dt>
<dd>
<p>Specifies the Load Balancer address used to route outbound traffic for this SIP Connector.</p>
</dd>
<dt class="hdlist1">loadBalancerRmiPort</dt>
<dd>
<p>Specifies the RMI Port used to connect to the Load Balancer for this SIP Connector. This enables the connector to advertise to the Load Balancer the IP and Port it is listening on so that the Load Balancer can route traffic to that connector as well.</p>
</dd>
<dt class="hdlist1">loadBalancerSipPort</dt>
<dd>
<p>Specifies the SIP Port of the Load Balancer to use for outbound traffic for this SIP Connector. This enables the connector to choose to which Load Balancer it sends outbound traffic. This is particularly useful for supporting different Load Balancers over different network interfaces</p>
</dd>
<dt class="hdlist1">useStun</dt>
<dd>
<p>Enables Session Traversal Utilities for NAT (STUN) support for this Connector.
The attribute defaults to "false". If set to "true", ensure that the <code>ipAddress</code> attribute is <em>not</em> set to <code>127.0.0.1</code>.
Refer to Restcomm SIP Servlets <a href="#_mssstun__stun">[_mssstun__stun]</a> for more information about STUN.</p>
</dd>
<dt class="hdlist1">stunServerAddress</dt>
<dd>
<p>Specifies the STUN server address used to discover the public IP address of the SIP Connector.
This attribute is only required if the <code>useStun</code> attribute is set to "true". Refer to Restcomm SIP Servlets <a href="#_mssstun__stun">[_mssstun__stun]</a> for more information about STUN and public STUN servers.</p>
</dd>
<dt class="hdlist1">stunServerPort</dt>
<dd>
<p>Specifies the STUN server port of the STUN server used in the <code>stunServerAddress</code> attribute.
You should rarely need to change this attribute; also, it is only needed if the <code>useStun</code> attribute is set to "true". Refer to Restcomm SIP Servlets <a href="#_mssstun__stun">[_mssstun__stun]</a> for more information about STUN.</p>
</dd>
<dt class="hdlist1">useStaticAddress</dt>
<dd>
<p>Specifies whether the settings in staticServerAddress and staticServerPort are activated.
The default value is "false" (deactivated).</p>
</dd>
<dt class="hdlist1">staticServerAddress</dt>
<dd>
<p>Specifies what load-balancer server address is inserted in Contact/Via headers for server-created requests.
This parameter  is useful for  cluster configurations where  requests should  be bound to a load-balancer address, rather than  a specific node address.</p>
</dd>
<dt class="hdlist1">staticServerPort</dt>
<dd>
<p>Specifies the port of the load-balancer specified in staticServerAddress.
This parameter is useful in cluster configurations where requests should be bound to a load-balancer address rather than a specific node address.</p>
</dd>
<dt class="hdlist1">httpFollowsSip</dt>
<dd>
<p>Makes the application server aware of how the SIP Load Balancers assign request affinity, and stores this information in the application session.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A comprehensive list of implementing classes for the SIP Stack is available from the <a href="http://ci.jboss.org/jenkins/job/jain-sip/lastSuccessfulBuild/artifact/javadoc/javax/sip/SipStack.html">Class SipStackImpl page on nist.gov</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bsssc_binary_sip_servlets_server_configuring_application_routing"><a class="anchor" href="#_bsssc_binary_sip_servlets_server_configuring_application_routing"></a>Application Routing and Service Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application router is called by the container to select a SIP Servlet application to service an initial request.
It embodies the logic used to choose which applications to invoke.
An application router is required for a container to function, but it is a separate logical entity from the container.</p>
</div>
<div class="paragraph">
<p>The application router is responsible for application selection and must not implement application logic.
For example, the application router cannot modify a request or send a response.</p>
</div>
<div class="paragraph">
<p>For more information about the application router, refer to the following sections of the <a href="http://jcp.org/en/jsr/detail?id=289">JSR 289 specification</a>: Application Router Packaging and Deployment, Application Selection Process, and Appendix C.</p>
</div>
<div class="paragraph">
<p>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>See the example chapters for more information about the Application Router Configuration for SIP Restcomm SIP Servlets for JBoss AS7</p>
</div>
<div class="paragraph">
<p><a href="#_sfss_services_for_sip_servlets">[_sfss_services_for_sip_servlets]</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to configure the application router for Tomcat, you should edit the <code>Service</code> element in the container&#8217;s <em class="path">server.xml</em> configuration file</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Configuring the Service Element in the Container&#8217;s server.xml</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">  &lt;Service name="Sip-Servlets"
 className="org.mobicents.servlet.sip.startup.SipStandardService"
 sipApplicationDispatcherClassName="org.mobicents.servlet.sip.core.SipApplicationDispatcherImpl"
 usePrettyEncoding="false"
 additionalParameterableHeaders="Header1,Header2"
 bypassResponseExecutor="false"
 bypassRequestExecutor="false"
 baseTimerInterval="500"
 t2Interval="4000"
 t4Interval="5000"
 timerDInterval="32000"
 dispatcherThreadPoolSize="4"
 darConfigurationFileLocation="file:///home/user/workspaces/sip-servlets/
 sip-servlets-examples/reinvite-demo/reinvite-dar.properties"
 sipStackPropertiesFile="conf/mss-sip-stack.properties"
 dialogPendingRequestChecking="false"
 callIdMaxLength="32"
 tagHashMaxLength="10"
 canceledTimerTasksPurgePeriod="1"&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For Restcomm SIP Servlets for JBoss AS7 this is located in standalone-sip.xml file :</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Configuring the Mobicents SubSystem Element in the Container&#8217;s standalone.xml</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">  &lt;subsystem xmlns="urn:org.mobicents:sip-servlets-as7:1.0" application-router="dars/mobicents-dar.properties" stack-properties="mss-sip-stack.properties" path-name="gov.nist" app-dispatcher-class="org.mobicents.servlet.sip.core.SipApplicationDispatcherImpl" concurrency-control-mode="SipApplicationSession" congestion-control-interval="-1"&gt;
            &lt;connector name="sip-udp" protocol="SIP/2.0" scheme="sip" socket-binding="sip-udp"/&gt;
            &lt;connector name="sip-tcp" protocol="SIP/2.0" scheme="sip" socket-binding="sip-tcp"/&gt;
            &lt;connector name="sip-tls" protocol="SIP/2.0" scheme="sip" socket-binding="sip-tls"/&gt;
        &lt;/subsystem&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="dlist">
<div class="title">SIP Service element attributes</div>
<dl>
<dt class="hdlist1">className</dt>
<dd>
<p>This attribute specifies that the servlet container is a <em>converged</em> (i.e.
SIP + HTTP) servlet container.</p>
</dd>
<dt class="hdlist1">sipApplicationDispatcherClassName (Tomcat) - app-dispatcher-class (JBoss/EAP)</dt>
<dd>
<p>This attribute specifies the class name of the <code>org.mobicents.servlet.sip.core.SipApplicationDispatcher</code> implementation to use.
The routing algorithm and application selection process is performed in that class.</p>
</dd>
<dt class="hdlist1">darConfigurationFileLocation (Tomcat) - application-router (JBoss/EAP)</dt>
<dd>
<p>The default application router file location.
This is used by the default application router to determine the application selection logic.
Refer to Appendix C of the JSR 289 specification for more details.</p>
</dd>
<dt class="hdlist1">sipStackPropertiesFile (Tomcat) - stack-properties (JBoss/EAP)</dt>
<dd>
<p>Specifies the location of the file containing key value pairs corresponding to the SIP Stack configuration properties.
This attribute is used to further tune the JAIN SIP Stack.
If this property is omitted, the following default values are assumed:</p>
</dd>
<dt class="hdlist1">usePrettyEncoding (Tomcat) - use-pretty-encoding (JBoss/EAP)</dt>
<dd>
<p>Allows Via, Route, and RecordRoute header field information to be split into multiple lines, rather than each header field being separating with a comma.
The attribute defaults to "true". Leaving this attribute at the default setting may assist in debugging non-RFC3261 compliant SIP servers.</p>
</dd>
<dt class="hdlist1">additionalParameterableHeaders (Tomcat) - additional-parameterable-headers (JBoss/EAP)</dt>
<dd>
<p>Comma separated list of header names that are treated as parameterable by the container.
The specified headers are classed as valid, in addition to the standard parameterable headers defined in the Sip Servlets 1.1 Specification.</p>
</dd>
<dt class="hdlist1">baseTimerInterval (Tomcat) - base-timer-interval (JBoss/EAP)</dt>
<dd>
<p>Specifies the <code>T1</code> Base Timer Interval, which allows the SIP Servlets container to adjust its timers depending on network conditions.
The default interval is 500 (milliseconds).</p>
</dd>
<dt class="hdlist1">t2Interval (Tomcat) - t2-interval (JBoss/EAP)</dt>
<dd>
<p>Specifies the <code>T2</code> Interval, which allows the SIP Servlets container to adjust its timers depending on network conditions.
The default interval is 4000 (milliseconds).</p>
</dd>
<dt class="hdlist1">t4Interval (Tomcat) - t4-interval (JBoss/EAP)</dt>
<dd>
<p>Specifies the <code>T4</code> Interval, which allows the SIP Servlets container to adjust its timers depending on network conditions.
The default interval is 5000 (milliseconds).</p>
</dd>
<dt class="hdlist1">timerDInterval (Tomcat) - timerD-interval (JBoss/EAP)</dt>
<dd>
<p>Specifies the <code>Timer D</code> Interval, which allows the SIP Servlets container to adjust its timers depending on network conditions.
The default interval is 32000 (milliseconds).</p>
</dd>
<dt class="hdlist1">dialogPendingRequestChecking (Tomcat) - dialog-pending-request-checking (JBoss/EAP)</dt>
<dd>
<p>This property enables and disables error checking when SIP transactions overlap.
If within a single dialog an INVITE request arrives while there is antoher transaction proceeding, the container will send a 491 error response.
The default value is false.</p>
</dd>
<dt class="hdlist1">callIdMaxLength (Tomcat) - call-id-max-length (JBoss/EAP)</dt>
<dd>
<p>This property allows to shorten the size of Call-ID Header.
This is useful when integrating with Lync (which has a limit of 32 in size) or older SIP Servers</p>
</dd>
<dt class="hdlist1">tagHashMaxLength (Tomcat) - tag-hash-max-length (JBoss/EAP)</dt>
<dd>
<p>This property allows to shorten the size of tags in From and To Header.
This is useful when integrating with Lync (which has a limit of 10 in size) or older SIP Servers</p>
</dd>
<dt class="hdlist1">dnsServerLocatorClass (Tomcat) - dns-server-locator-class (JBoss/EAP)</dt>
<dd>
<p>Specifies the <code class="class">org.mobicents.ext.javax.sip.dns.DNSServerLocator</code> implementation class that will be used by the container to perform DNS lookups compliant with RFC 3263 : Locating SIP Servers and E.164 NUmber Mapping.
The default class used by the container is <code class="class">org.mobicents.ext.javax.sip.dns.DefaultDNSServerLocator</code>, but any class implementing the <code class="class">org.mobicents.ext.javax.sip.dns.DNSServerLocator</code> interface.
To disable DNS lookups, this attribute should be left empty.</p>
</dd>
<dt class="hdlist1">dnsResolverClass (Tomcat) - dns-resolver-class (JBoss/EAP)</dt>
<dd>
<p>Specifies the <code class="class">org.mobicents.javax.servlet.sip.dns.DNSResolver</code> implementation class that will be used by the container to perform DNS lookups compliant with RFC 3263 : Locating SIP Servers and E.164 NUmber Mapping.
The default class used by the container is <code class="class">org.mobicents.servlet.sip.dns.MobicentsDNSResolver</code>, but any class implementing the <code class="class">org.mobicents.servlet.sip.dns.DNSResolver</code> interface.
To disable DNS lookups, this attribute should be left empty.</p>
</dd>
<dt class="hdlist1">addressResolverClass (Tomcat) - address-resolver-class (JBoss/EAP)</dt>
<dd>
<p>Specifies the <code class="class">gov.nist.core.net.AddressResolver</code> implementation class that will be used by the container to perform DNS lookups.
The default class used by the container is <code class="class">org.mobicents.servlet.sip.core.DNSAddressResolver</code>, but any class implementing the <code class="class">gov.nist.core.net.AddressResolver</code> NIST SIP Stack interface and having a constructor with a <code class="class">org.mobicents.servlet.sip.core.SipApplicationDispatcher</code> parameter can be used.
To disable DNS lookups, this attribute should be left empty.</p>
</dd>
<dt class="hdlist1">canceledTimerTasksPurgePeriod (Tomcat) - canceled-timer-tasks-purge-period (JBoss/EAP)</dt>
<dd>
<p>Defines a period to due a purge in the container timer schedulers.
The purge may prevent excessive memory usage for apps that cancel most of the timers it sets.</p>
</dd>
</dl>
</div>
<div id="_bsssc_binary_sip_servlets_server_configuring_logging" class="literalblock">
<div class="content">
<pre>== SIP Servlets Server Logging</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Logging is an important part of working with Restcomm SIP Servlets.
There are a few files that you need to be familiar with in order to successfully troubleshoot and adapt Restcomm SIP Servlets server monitoring and logging to your environment.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>.Logging Files for Restcomm SIP Servlets for JBoss AS7
$JBOSS/standalone/configuration/logging.properties</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$JBOSS/standalone/configuration/mss-sip-stack.properties</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$JBOSS/standalone/configuration/standalone-sip.xml</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>.Setting the log file name in $JBOSS/standalone/configuration/standalone-sip.xml
====
[source,xml]
----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> &lt;/formatter&gt;
&lt;file relative-to="jboss.server.log.dir" path="server.log"/&gt;
&lt;suffix value=".yyyy-MM-dd"/&gt;
&lt;append value="true"/&gt;
----
====</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>The configuration above produces SIP logs that can be found in the  $JBOSS_HOME/standalone/log directory.
Below is an extract of the log files.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>                       server.log.2012-08-14  server.log.2012-08-24
server.log             server.log.2012-08-16  server.log.2012-08-25
server.log.2012-08-07  server.log.2012-08-21  server.log.2012-08-26
server.log.2012-08-13  server.log.2012-08-22
----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>.Logging Files for Restcomm SIP Servlets for Tomcat
If you are working with Tomcat, the log configuration files are located in the $CATALINA_HOME/conf/ directory.
The log4j configuration file is located in $CATALINA_HOME/lib/ directory</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$CATALINA_HOME/conf/logging.properties</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$CATALINA_HOME/conf/mss-sip-stack.properties</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$CATALINA_HOME/conf/server.xml</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$CATALINA_HOME/lib/log4j.xml</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>.Truncated Sample Configuration from Server.xml
.Setting the log file name $CATALINA_HOME/conf/server.xml
====
[source,xml]
----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log." suffix=".txt"
               pattern="%h %l %u %t &amp;quot;%r&amp;quot; %s %b" resolveHosts="false"/&gt;
----
====</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>.Truncated Sample Configuration from log4j.xml
.Configuring the log file name $CATALINA_HOME/lib/log4j.xml
====
[source,xml]
----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"&gt;
  &lt;appender name="rolling-file" class="org.apache.log4j.RollingFileAppender"&gt;
    &lt;param name="file" value="${catalina.home}/logs/sip-server.log"/&gt;
    &lt;param name="MaxFileSize" value="1000KB"/&gt;
----
====</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>The result of the extracted configuration above that is taken from the log4j.xml file  and can be found in the $CATALINA_HOME/logs directory.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>JAIN-SIP Stack Logging</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>There are two separate levels of logging:</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Logging at the container level, which can be configured using the <em class="path">log4j.xml</em> or <em class="path">standalone-sip.xml</em> configuration file seen above</p>
</li>
<li>
<p>Logging of the JAIN SIP stack, which is configured through the container logging and the SIP stack properties themselves</p>
<div class="literalblock">
<div class="content">
<pre>You can setup the logging so that the JAIN SIP Stack will log into the container logs.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>To use LOG4J in JAIN SIP Stack in Tomcat, you need to define a category in [path]_CATALINE_HOME/lib/jboss-log4j.xml_ and set it to `DEBUG`.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>.Configuring the JAIN SIP Stack to log into the Tomcat Container's logs
====
[source,xml]
----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>                        &lt;category name="gov.nist"&gt;
                        &lt;priority value="DEBUG"/&gt;
                        &lt;/category&gt;
----
====</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>To use LOG4J in JAIN SIP Stack in JBoss, you need to define a logger in [path]_JBOSS_HOME/standalone/configuration/standalone-sip.xml_ and set it to `DEBUG`.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>.Configuring the JAIN SIP Stack to log into the JBoss Container's logs
====
[source,xml]
----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>                        &lt;logger category="gov.nist"&gt;
                		&lt;level name="DEBUG"/&gt;
            		&lt;/logger&gt;
----
====</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>For this category to be used in Restcomm SIP Servlets, you need to specify it in [path]_JBOSS_HOME/standalone/configuration/mss-sip-stack.properties_ or [path]_CATALINE_HOME/conf/mss-sip-stack.properties_, add the `gov.nist.javax.sip.LOG4J_LOGGER_NAME=gov.nist` property, and set the `gov.nist.javax.sip.TRACE_LEVEL=LOG4J` property.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>====
**NOTE**
When using ``loadbalanceraddress`` algorithm for LB it is necessary to add the following at ``mss-sip-stack.properties`` file for the keepalive mechanism:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>----
org.mobicents.ha.javax.sip.LoadBalancerHeartBeatingServiceClassName=org.mobicents.ha.javax.sip.MultiNetworkLoadBalancerHeartBeatingServiceImpl
----</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-27 14:29:45 UTC
</div>
</div>
</body>
</html>